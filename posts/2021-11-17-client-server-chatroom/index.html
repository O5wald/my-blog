<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><meta http-equiv=x-ua-compatible content="IE=edge, chrome=1"><title>Client-Server Chat Room using Python - O5wald</title><meta name=Description content="Learn Share Grow"><meta property="og:title" content="Client-Server Chat Room using Python"><meta property="og:description" content="Client-Server Chat Room In my previous article, I covered what a socket is and the different types of sockets, as well as the C implementation. Today, we&rsquo;ll use Sockets to create a client-server chat room in Python.
Let&rsquo;s look at how client-server architecture works first. The client-server architecture is a model in which the server hosts, provides, and controls the majority of the resources and services that the client consumes. One or more client computers are connected to a central server through a network or the internet in this architecture."><meta property="og:type" content="article"><meta property="og:url" content="https://o5wald.github.io/posts/2021-11-17-client-server-chatroom/"><meta property="og:image" content="https://o5wald.github.io/logo.png"><meta property="article:section" content="posts"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://o5wald.github.io/logo.png"><meta name=twitter:title content="Client-Server Chat Room using Python"><meta name=twitter:description content="Client-Server Chat Room In my previous article, I covered what a socket is and the different types of sockets, as well as the C implementation. Today, we&rsquo;ll use Sockets to create a client-server chat room in Python.
Let&rsquo;s look at how client-server architecture works first. The client-server architecture is a model in which the server hosts, provides, and controls the majority of the resources and services that the client consumes. One or more client computers are connected to a central server through a network or the internet in this architecture."><meta name=application-name content="This"><meta name=apple-mobile-web-app-title content="This"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://o5wald.github.io/posts/2021-11-17-client-server-chatroom/><link rel=prev href=https://o5wald.github.io/posts/networking_basics/><link rel=stylesheet href=/lib/normalize/normalize.min.css><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Client-Server Chat Room using Python","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/o5wald.github.io\/posts\/2021-11-17-client-server-chatroom\/"},"genre":"posts","wordcount":1216,"url":"https:\/\/o5wald.github.io\/posts\/2021-11-17-client-server-chatroom\/","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"Aryan Kapse"},"description":""}</script></head><body header-desktop=fixed header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title=O5wald>$cd Home</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>Posts </a><a class=menu-item href=/categories/>Categories </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder="Search titles or contents..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Search><i class="fas fa-search fa-fw"></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Clear><i class="fas fa-times-circle fa-fw"></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin"></i></span>
</span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw"></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title=O5wald>$cd Home</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Search titles or contents..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Search><i class="fas fa-search fa-fw"></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Clear><i class="fas fa-times-circle fa-fw"></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin"></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Cancel</a></div><a class=menu-item href=/posts/ title>Posts</a><a class=menu-item href=/categories/ title>Categories</a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw"></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animated flipInX">Client-Server Chat Room using Python</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw"></i>Aryan Kapse</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=0001-01-01>0001-01-01</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;1216 words&nbsp;
<i class="far fa-clock fa-fw"></i>&nbsp;6 minutes&nbsp;</div></div><div class="details toc" id=toc-static kept=true><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#server-side-coding>Server Side Coding</a></li><li><a href=#client-side-coding>Client side coding</a></li></ul></nav></div></div><div class=content id=content><h1 id=client-server-chat-room>Client-Server Chat Room</h1><p>In my <a href=https://dr-deathvolt.github.io/2021-7-17-socket-programming-101 target=_blank rel="noopener noreffer">previous article</a>, I covered what a socket is and the different types of sockets, as well as the C implementation. Today, we&rsquo;ll use Sockets to create a client-server chat room in Python.</p><p>Let&rsquo;s look at how client-server architecture works first.
The client-server architecture is a model in which the server hosts, provides, and controls the majority of the resources and services that the client consumes. One or more client computers are connected to a central server through a network or the internet in this architecture.</p><p><img class=lazyload src=/svg/loading.min.svg data-src=https://upload.wikimedia.org/wikipedia/commons/thumb/c/c9/Client-server-model.svg/1200px-Client-server-model.svg.png data-srcset="https://upload.wikimedia.org/wikipedia/commons/thumb/c/c9/Client-server-model.svg/1200px-Client-server-model.svg.png, https://upload.wikimedia.org/wikipedia/commons/thumb/c/c9/Client-server-model.svg/1200px-Client-server-model.svg.png 1.5x, https://upload.wikimedia.org/wikipedia/commons/thumb/c/c9/Client-server-model.svg/1200px-Client-server-model.svg.png 2x" data-sizes=auto alt=https://upload.wikimedia.org/wikipedia/commons/thumb/c/c9/Client-server-model.svg/1200px-Client-server-model.svg.png title=client-server></p><p>In our programme, we will create a basic server that will wait for a client to connect and then receive the messages from client and send it to other clients in the server. When someone disconnected then it broadcast the message that the particular client is disconnected.</p><p>Let&rsquo;s Dive into Coding!</p><h2 id=server-side-coding>Server Side Coding</h2><ol><li>We need to import the necessary packages</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># File : Server.py</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>socket</span> 
</span></span><span class=line><span class=cl><span class=c1># to establish connection between server and client</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>threading</span> 
</span></span><span class=line><span class=cl><span class=c1># to run multiple tasks at same time</span>
</span></span></code></pre></div><ol start=2><li>Create socket object</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># server.py continue....</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>server</span> <span class=o>=</span> <span class=n>socket</span><span class=o>.</span><span class=n>socket</span><span class=p>(</span><span class=n>socket</span><span class=o>.</span><span class=n>AF_INET</span><span class=p>,</span><span class=n>socket</span><span class=o>.</span><span class=n>SOCK_STREAM</span><span class=p>)</span>
</span></span></code></pre></div><ul><li><code>socket.AF_INET</code> to define Address family<ul><li><code>AF_INET</code> for IPv4</li><li><code>AF_INET6</code> for IPv6</li></ul></li><li><code>socket.SOCK_STREAM</code> to define type of socket<ul><li><code>SOCK_STREAM</code> for TCP/IP</li><li><code>SOCK_DGRAM</code> for UDP</li><li>See all other types and their Information <a href="https://www.ibm.com/docs/pl/aix/7.1?topic=protocols-socket-types" target=_blank rel="noopener noreffer">here</a></li></ul></li></ul><ol start=3><li>Define Veriables for easy to use</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># server.py continue....</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>ADDRESS</span> <span class=o>=</span> <span class=s1>&#39;127.0.0.1&#39;</span>
</span></span><span class=line><span class=cl><span class=n>PORT</span> <span class=o>=</span> <span class=mi>5550</span>
</span></span></code></pre></div><ul><li><code>ADDRESS</code> variable defines the address that we want to host our server<ul><li>we are building this for local area network <code>LAN</code></li><li>so we are specifying local host address which is <code>127.0.0.1</code></li></ul></li><li><code>PORT</code> to host on 5550 port</li><li>why not other ports?<ul><li>0 to 1024 ports are well known and predefined for services</li><li>You can see more info <a href=https://en.wikipedia.org/wiki/List_of_TCP_and_UDP_port_numbers target=_blank rel="noopener noreffer">here</a> on which port you want to use</li><li>you can use any port above 1024</li></ul></li></ul><ol start=4><li>Bind the server to address and port [means hosting the server on <code>ADDRESS</code> and <code>PORT</code>]</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># server.py continue....</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>server</span><span class=o>.</span><span class=n>bind</span><span class=p>((</span><span class=n>ADDRESS</span><span class=p>,</span><span class=n>PORT</span><span class=p>))</span>
</span></span></code></pre></div><ul><li><code>bind()</code> assign an IP address and port to the server instance<ul><li><code>bind()</code> function needed tuple of address and port</li></ul></li></ul><ol start=5><li>Now, before start listening and accepting the clients. we need to define some functions to organize and simplify the code</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># server.py continue....</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>clients</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl><span class=n>names</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>broadcast</span><span class=p>(</span><span class=n>messege</span><span class=p>):</span>
</span></span><span class=line><span class=cl>  <span class=k>for</span> <span class=n>client</span> <span class=ow>in</span> <span class=n>clients</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>client</span><span class=o>.</span><span class=n>send</span><span class=p>(</span><span class=n>message</span><span class=o>.</span><span class=n>encode</span><span class=p>(</span><span class=s1>&#39;utf-8&#39;</span><span class=p>)</span>
</span></span></code></pre></div><ul><li>creating list called <code>clients</code> and <code>names</code><ul><li>to store the IP addresses of connected clients</li><li>and there <code>names</code></li></ul></li><li>defined a function called <code>broadcast()</code><ul><li>take <code>messege</code> as parameter</li><li>in every client in list of <code>clients</code></li><li>send the messege in encoded form</li><li>Why? because sockets talk each other in bytes</li></ul></li></ul><ol start=6><li>Create function for revcieve and broadcast that revcived messege</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># server.py continue....</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>recv_messege_send</span><span class=p>(</span><span class=n>client</span><span class=p>):</span>
</span></span><span class=line><span class=cl>  <span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>       <span class=n>msg</span> <span class=o>=</span> <span class=n>client</span><span class=o>.</span><span class=n>recv</span><span class=p>(</span><span class=mi>1024</span><span class=p>)</span><span class=o>.</span><span class=n>decode</span><span class=p>(</span><span class=s1>&#39;utf-8&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>       <span class=n>broadcast</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>except</span><span class=p>:</span>
</span></span><span class=line><span class=cl>       <span class=n>index</span> <span class=o>=</span> <span class=n>clients</span><span class=o>.</span><span class=n>index</span><span class=p>(</span><span class=n>client</span><span class=p>)</span>
</span></span><span class=line><span class=cl>       <span class=n>nm</span> <span class=o>=</span> <span class=n>names</span><span class=p>[</span><span class=n>index</span><span class=p>]</span>
</span></span><span class=line><span class=cl>       <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>nm</span><span class=si>}</span><span class=s2> left the server!&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>       <span class=n>clients</span><span class=o>.</span><span class=n>remove</span><span class=p>(</span><span class=n>client</span><span class=p>)</span>
</span></span><span class=line><span class=cl>       <span class=n>broadcast</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>nm</span><span class=si>}</span><span class=s2> left the server!&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>       <span class=n>names</span><span class=o>.</span><span class=n>remove</span><span class=p>(</span><span class=n>nm</span><span class=p>)</span>
</span></span><span class=line><span class=cl>       <span class=n>client</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
</span></span><span class=line><span class=cl>       <span class=k>break</span>
</span></span></code></pre></div><ul><li>defined a function called <code>recv_send()</code><ul><li>which take <code>client</code> as an parameter then</li><li>try to check any messeage from the client and broadcast the messege</li><li>if any error occurs<ul><li>error like client is left the server</li><li>client is down</li></ul></li><li>then take index of that client and remove it from <code>clients</code> list and from <code>names</code> list</li><li>then broadcast the messeage that the particular client is left the server</li><li><code>close()</code> for closing the connection of that client and break the loop so that server<ul><li>we won&rsquo;t recive any messege from that removed client anymore</li></ul></li></ul></li></ul><ol start=7><li>We&rsquo;re good to go now for listen the clients</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># server.py continue....</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>server</span><span class=o>.</span><span class=n>listen</span><span class=p>(</span><span class=mi>5</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>while</span> <span class=kc>True</span><span class=p>:</span> <span class=c1>#0</span>
</span></span><span class=line><span class=cl>    <span class=n>client</span><span class=p>,</span><span class=n>addr</span> <span class=o>=</span> <span class=n>server</span><span class=o>.</span><span class=n>accept</span><span class=p>()</span> <span class=c1>#1</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>addr</span><span class=si>}</span><span class=s2> is Connected to the server!&#34;</span><span class=p>)</span> <span class=c1>#2</span>
</span></span><span class=line><span class=cl>    <span class=n>broadcast</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>addr</span><span class=si>}</span><span class=s2> is Connected to the server!&#34;</span><span class=p>)</span> <span class=c1>#3</span>
</span></span><span class=line><span class=cl>    <span class=n>client</span><span class=o>.</span><span class=n>send</span><span class=p>(</span><span class=s1>&#39;NAME&#39;</span><span class=o>.</span><span class=n>encode</span><span class=p>(</span><span class=s1>&#39;utf-8&#39;</span><span class=p>))</span> <span class=c1>#4</span>
</span></span><span class=line><span class=cl>    <span class=n>nm</span> <span class=o>=</span> <span class=n>client</span><span class=o>.</span><span class=n>recv</span><span class=p>(</span><span class=mi>1024</span><span class=p>)</span><span class=o>.</span><span class=n>decode</span><span class=p>(</span><span class=s1>&#39;utf-8&#39;</span><span class=p>)</span> <span class=c1>#5</span>
</span></span><span class=line><span class=cl>    <span class=n>broadcast</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Name of </span><span class=si>{</span><span class=n>addr</span><span class=si>}</span><span class=s2> is </span><span class=si>{</span><span class=n>nm</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span> <span class=c1>#6</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Name of </span><span class=si>{</span><span class=n>addr</span><span class=si>}</span><span class=s2> is </span><span class=si>{</span><span class=n>nm</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span> <span class=c1>#7</span>
</span></span><span class=line><span class=cl>    <span class=n>clients</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>client</span><span class=p>)</span> <span class=c1>#8 </span>
</span></span><span class=line><span class=cl>    <span class=n>names</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>nm</span><span class=p>)</span> <span class=c1>#9</span>
</span></span><span class=line><span class=cl>    <span class=n>rec</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>Thread</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=n>recv_messege_send</span><span class=p>,</span><span class=n>args</span><span class=o>=</span><span class=p>(</span><span class=n>client</span><span class=p>,))</span> <span class=c1>#10</span>
</span></span><span class=line><span class=cl>    <span class=n>rec</span><span class=o>.</span><span class=n>start</span><span class=p>()</span> <span class=c1>#11</span>
</span></span></code></pre></div><ul><li><code>server.listen()</code> to listen the client is trying to connect<ul><li><code>listen()</code> function have parameter value 5</li><li>which means server listening upto 5 clients</li><li>You increase number of clients you want to connect to the server</li></ul></li><li>Running a loop<ul><li>at <code>#1</code> to accept the clients who wants to connect to the server</li><li>at <code>#1</code> in <code>client,addr</code> client store the information of the connected client and addr take only address of connected client</li><li>at <code>#2</code> and <code>#3</code> to simply just broadcast the messege that the client is connected</li><li>at <code>#4</code> asking the client to enter his nickname to display in server</li><li>at <code>#5</code> to <code>#9</code> reciving the name of that connected client decodeing it and storing in veriable then broadcasting the messege to tell the connected clients the name of the new connected client and then adding the new connected client address in <code>clients</code> list and name in <code>names</code> list</li></ul></li></ul><ol start=8><li>at <code>#10</code> we are using threading concept</li></ol><ul><li>threading means running multiple functions,tasks at same time</li><li>so in that <code>Thread</code> function we targeting the function <code>recv_messege_send</code> with <code>client</code> as an argument</li><li>so when the server waiting for the client to connect at that same time server is receving the messege from other clients which are already connected to the server and broadcast that messege</li><li>at <code>#11</code> we are starting that thread</li></ul><h2 id=client-side-coding>Client side coding</h2><ol><li>We need to import the necessary packages</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># File : client.py</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>socket</span> 
</span></span><span class=line><span class=cl><span class=c1># to establish connection between server and client</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>threading</span> 
</span></span><span class=line><span class=cl><span class=c1># to run multiple tasks at same time</span>
</span></span></code></pre></div><ol start=2><li>Take Name to display on the server</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># client.py continue....</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>name</span> <span class=o>=</span> <span class=nb>input</span><span class=p>(</span><span class=s2>&#34;Enter your name: &#34;</span><span class=p>)</span>
</span></span></code></pre></div><ol start=3><li>Defining Address and port which we want to connect</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># client.py continue....</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>ADDRESS</span> <span class=o>=</span> <span class=s1>&#39;127.0.0.1&#39;</span>
</span></span><span class=line><span class=cl><span class=n>PORT</span> <span class=o>=</span> <span class=mi>5550</span>
</span></span></code></pre></div><ol start=4><li>Create Socket Object</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># client.py continue....</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>client</span> <span class=o>=</span> <span class=n>socket</span><span class=o>.</span><span class=n>socket</span><span class=p>(</span><span class=n>socket</span><span class=o>.</span><span class=n>AF_INET</span><span class=p>,</span><span class=n>socket</span><span class=o>.</span><span class=n>SOCK_STREAM</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>try</span><span class=p>:</span> 
</span></span><span class=line><span class=cl>    <span class=n>client</span><span class=o>.</span><span class=n>connect</span><span class=p>((</span><span class=n>ADDR</span><span class=p>,</span><span class=n>PORT</span><span class=p>))</span> <span class=c1>#1</span>
</span></span><span class=line><span class=cl><span class=k>except</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Server is Curruntly Down! or Unreachable!&#34;</span><span class=p>)</span> <span class=c1>#2</span>
</span></span><span class=line><span class=cl>    <span class=n>exit</span><span class=p>()</span>
</span></span></code></pre></div><ul><li><code>socket.AF_INET</code> to define Address family<ul><li><code>AF_INET</code> for IPv4</li><li><code>AF_INET6</code> for IPv6</li></ul></li><li><code>socket.SOCK_STREAM</code> to define type of socket<ul><li><code>SOCK_STREAM</code> for TCP/IP</li><li><code>SOCK_DGRAM</code> for UDP</li><li>See all other types and their Information <a href="https://www.ibm.com/docs/pl/aix/7.1?topic=protocols-socket-types" target=_blank rel="noopener noreffer">here</a></li></ul></li><li><strong>NOTE</strong>: The address family and the type of socket must be same as server&rsquo;s address family and socket type</li><li>at <code>#1</code> we are trying to connect to the server<ul><li>if any error occurs like server is not running or anything else</li><li>then printing the messege &ldquo;Server is Curruntly Down! or Unreachable!&rdquo; and exit the program</li></ul></li></ul><ol start=5><li>Creating simple function to send the messege to the server</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># client.py continue....</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>send_msg</span><span class=p>(</span><span class=n>client</span><span class=p>):</span>
</span></span><span class=line><span class=cl>  <span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
</span></span><span class=line><span class=cl>      <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>          <span class=n>msg</span> <span class=o>=</span> <span class=nb>input</span><span class=p>()</span>
</span></span><span class=line><span class=cl>          <span class=n>client</span><span class=o>.</span><span class=n>send</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>name</span><span class=si>}</span><span class=s2>: </span><span class=si>{</span><span class=n>msg</span><span class=si>}</span><span class=s2>&#34;</span><span class=o>.</span><span class=n>encode</span><span class=p>(</span><span class=s1>&#39;utf-8&#39;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>      <span class=k>except</span><span class=p>:</span>
</span></span><span class=line><span class=cl>          <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Something Went Wrong&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>          <span class=n>exit</span><span class=p>()</span>
</span></span></code></pre></div><ul><li><code>send_msg</code> take client as an argument then run a while loop to take input from user and send that message with clients name and messege</li><li>if any error occurs then print &ldquo;Something Went Wrong&rdquo; and exit the program</li></ul><ol start=6><li>Creating simple loop to recive and able to run the <code>send_msg</code> function at same time</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># client.py continue....</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>rec</span> <span class=o>=</span> <span class=n>client</span><span class=o>.</span><span class=n>recv</span><span class=p>(</span><span class=mi>1024</span><span class=p>)</span><span class=o>.</span><span class=n>decode</span><span class=p>(</span><span class=s1>&#39;utf-8&#39;</span><span class=p>)</span> <span class=c1>#1</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>rec</span> <span class=o>==</span> <span class=s1>&#39;NAME&#39;</span><span class=p>:</span> <span class=c1>#2</span>
</span></span><span class=line><span class=cl>        <span class=n>client</span><span class=o>.</span><span class=n>send</span><span class=p>(</span><span class=n>name</span><span class=o>.</span><span class=n>encode</span><span class=p>(</span><span class=s1>&#39;utf-8&#39;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=k>elif</span> <span class=ow>not</span> <span class=n>rec</span><span class=p>:</span> <span class=c1>#3</span>
</span></span><span class=line><span class=cl>        <span class=k>continue</span>
</span></span><span class=line><span class=cl>    <span class=k>elif</span> <span class=n>rec</span><span class=p>:</span> <span class=c1>#4</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>rec</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>sm</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>Thread</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=n>send_msg</span><span class=p>,</span><span class=n>args</span><span class=o>=</span><span class=p>(</span><span class=n>client</span><span class=p>,))</span> <span class=c1>#5</span>
</span></span><span class=line><span class=cl>    <span class=n>sm</span><span class=o>.</span><span class=n>start</span><span class=p>()</span> <span class=c1>#6</span>
</span></span></code></pre></div><ul><li>at <code>#1</code> client receiving the messege from server and storing it in the <code>rec</code></li><li>at <code>#2</code> if messege received from the server contain &lsquo;NAME&rsquo; which is asking for clients name then sending the <code>name</code></li><li>at <code>#3</code> if messege received from the server doesn&rsquo;t contain any data then continue without printing it because server has no data to tell something</li><li>at <code>#4</code> any messege is received from the server then simply print it</li><li>at <code>#5</code> we are defining Thread Function to take <code>send_msg</code> function and run this function at same time as client is receving the messege</li><li>at <code>#6</code> simply starting that thread</li></ul><hr><h1 id=testing>Testing</h1><p><img class=lazyload src=/svg/loading.min.svg data-src=/images/client_server.gif data-srcset="/images/client_server.gif, /images/client_server.gif 1.5x, /images/client_server.gif 2x" data-sizes=auto alt=/images/client_server.gif title=client_server></p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 0001-01-01</span></div><div class=post-info-license></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=javascript:void(0); title="Share on Twitter" data-sharer=twitter data-url=https://o5wald.github.io/posts/2021-11-17-client-server-chatroom/ data-title="Client-Server Chat Room using Python" data-via=aryankapse10><i class="fab fa-twitter fa-fw"></i></a><a href=javascript:void(0); title="Share on Facebook" data-sharer=facebook data-url=https://o5wald.github.io/posts/2021-11-17-client-server-chatroom/><i class="fab fa-facebook-square fa-fw"></i></a><a href=javascript:void(0); title="Share on WhatsApp" data-sharer=whatsapp data-url=https://o5wald.github.io/posts/2021-11-17-client-server-chatroom/ data-title="Client-Server Chat Room using Python" data-web><i class="fab fa-whatsapp fa-fw"></i></a><a href=javascript:void(0); title="Share on Line" data-sharer=line data-url=https://o5wald.github.io/posts/2021-11-17-client-server-chatroom/ data-title="Client-Server Chat Room using Python"><i data-svg-src=/lib/simple-icons/icons/line.min.svg></i></a><a href=javascript:void(0); title="Share on 微博" data-sharer=weibo data-url=https://o5wald.github.io/posts/2021-11-17-client-server-chatroom/ data-title="Client-Server Chat Room using Python"><i class="fab fa-weibo fa-fw"></i></a><a href=javascript:void(0); title="Share on Myspace" data-sharer=myspace data-url=https://o5wald.github.io/posts/2021-11-17-client-server-chatroom/ data-title="Client-Server Chat Room using Python" data-description><i data-svg-src=/lib/simple-icons/icons/myspace.min.svg></i></a><a href=javascript:void(0); title="Share on Blogger" data-sharer=blogger data-url=https://o5wald.github.io/posts/2021-11-17-client-server-chatroom/ data-title="Client-Server Chat Room using Python" data-description><i class="fab fa-blogger fa-fw"></i></a><a href=javascript:void(0); title="Share on Evernote" data-sharer=evernote data-url=https://o5wald.github.io/posts/2021-11-17-client-server-chatroom/ data-title="Client-Server Chat Room using Python"><i class="fab fa-evernote fa-fw"></i></a></span></div></div></div><div class=post-info-more><section class=post-tags></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav><a href=/posts/networking_basics/ class=prev rel=prev title="Networking Basics"><i class="fas fa-angle-left fa-fw"></i>Networking Basics</a></div></div><div id=comments></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.94.1">Hugo</a> | Theme - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a></div><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2019 - 2022</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank></a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw"></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw"></i></a></div><link rel=stylesheet href=/lib/katex/katex.min.css><link rel=stylesheet href=/lib/katex/copy-tex.min.css><link rel=stylesheet href=/lib/cookieconsent/cookieconsent.min.css><script type=text/javascript src=/lib/smooth-scroll/smooth-scroll.min.js></script><script type=text/javascript src=/lib/autocomplete/autocomplete.min.js></script><script type=text/javascript src=/lib/lunr/lunr.min.js></script><script type=text/javascript src=/lib/lazysizes/lazysizes.min.js></script><script type=text/javascript src=/lib/clipboard/clipboard.min.js></script><script type=text/javascript src=/lib/sharer/sharer.min.js></script><script type=text/javascript src=/lib/katex/katex.min.js></script><script type=text/javascript src=/lib/katex/auto-render.min.js></script><script type=text/javascript src=/lib/katex/copy-tex.min.js></script><script type=text/javascript src=/lib/katex/mhchem.min.js></script><script type=text/javascript src=/lib/cookieconsent/cookieconsent.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:10},comment:{},cookieconsent:{content:{dismiss:"Got it!",link:"Learn more",message:"This website uses Cookies to improve your experience."},enable:!0,palette:{button:{background:"#f0f0f0"},popup:{background:"#1aa3ff"}},theme:"edgeless"},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{highlightTag:"em",maxResultLength:10,noResultsFound:"No results found",snippetLength:30}}</script><script type=text/javascript src=/js/theme.min.js></script></body></html>