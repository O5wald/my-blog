<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><meta http-equiv=x-ua-compatible content="IE=edge, chrome=1"><title>Socket Programming 101 using C - O5wald</title><meta name=Description content="Learn Share Grow"><meta property="og:title" content="Socket Programming 101 using C"><meta property="og:description" content="Socket Programming 101 What is socket?   Socket is one endpoint of a communication link between systems. Your application sends and receives all of its network data through a socket.
  There are few different socket application programming interfaces (APIs).
 Berkeley Sockets  released in 1983 with 4.3BSD Unix. The terms Berkeley sockets, BSD sockets, Unix sockets, and Portable Operating System Interface (POSIX) sockets are often used interchangeably If you&rsquo;re using Linux or macOS, then your operating system provides a proper implementation of Berkeley sockets."><meta property="og:type" content="article"><meta property="og:url" content="https://o5wald.github.io/posts/socket-prog-101/"><meta property="og:image" content="https://o5wald.github.io/logo.png"><meta property="article:section" content="posts"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://o5wald.github.io/logo.png"><meta name=twitter:title content="Socket Programming 101 using C"><meta name=twitter:description content="Socket Programming 101 What is socket?   Socket is one endpoint of a communication link between systems. Your application sends and receives all of its network data through a socket.
  There are few different socket application programming interfaces (APIs).
 Berkeley Sockets  released in 1983 with 4.3BSD Unix. The terms Berkeley sockets, BSD sockets, Unix sockets, and Portable Operating System Interface (POSIX) sockets are often used interchangeably If you&rsquo;re using Linux or macOS, then your operating system provides a proper implementation of Berkeley sockets."><meta name=application-name content="This"><meta name=apple-mobile-web-app-title content="This"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://o5wald.github.io/posts/socket-prog-101/><link rel=next href=https://o5wald.github.io/posts/keylogger/><link rel=stylesheet href=/lib/normalize/normalize.min.css><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Socket Programming 101 using C","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/o5wald.github.io\/posts\/socket-prog-101\/"},"genre":"posts","wordcount":762,"url":"https:\/\/o5wald.github.io\/posts\/socket-prog-101\/","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"Aryan Kapse"},"description":""}</script></head><body header-desktop=fixed header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title=O5wald>$cd Home</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>Posts </a><a class=menu-item href=/categories/>Categories </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder="Search titles or contents..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Search><i class="fas fa-search fa-fw"></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Clear><i class="fas fa-times-circle fa-fw"></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin"></i></span>
</span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw"></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title=O5wald>$cd Home</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Search titles or contents..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Search><i class="fas fa-search fa-fw"></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Clear><i class="fas fa-times-circle fa-fw"></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin"></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Cancel</a></div><a class=menu-item href=/posts/ title>Posts</a><a class=menu-item href=/categories/ title>Categories</a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw"></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animated flipInX">Socket Programming 101 using C</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw"></i>Aryan Kapse</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=0001-01-01>0001-01-01</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;762 words&nbsp;
<i class="far fa-clock fa-fw"></i>&nbsp;4 minutes&nbsp;</div></div><div class="details toc" id=toc-static kept=true><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><ul><li></li></ul></li></ul><ul><li><ul><li><a href=#code-for-initializing-socket>Code for initializing socket</a></li></ul></li></ul></nav></div></div><div class=content id=content><h1 id=socket-programming-101>Socket Programming 101</h1><h1 id=what-is-socket>What is socket?</h1><ul><li><p>Socket is one endpoint of a communication link between systems. Your application sends and receives all of its network data through a socket.</p></li><li><p>There are few different socket <strong>application programming interfaces (APIs)</strong>.</p><ul><li><strong>Berkeley Sockets</strong><ul><li>released in 1983 with 4.3BSD Unix.</li><li>The terms Berkeley sockets, BSD sockets, Unix sockets, and Portable Operating System Interface (POSIX) sockets are often used interchangeably</li><li>If you&rsquo;re using Linux or macOS, then your operating system provides a proper implementation of Berkeley sockets.</li></ul></li><li><strong>Winsock</strong><ul><li>Windows socket API is called <strong>Winsock</strong></li><li>it was created to be largely compatible with Berkeley sockets.</li></ul></li></ul></li><li><p><strong>Historically, sockets were used for inter-process communication (IPC) as well as various network protocols. we use sockets only for communication with TCP and UDP</strong></p></li></ul><h1 id=types-of-sockets>Types of Sockets</h1><h4 id=sockets-come-in-two-basic-types>Sockets come in two basic types</h4><ul><li><p><strong>Connection-oriented</strong> and <strong>connectionless</strong>.</p></li><li><p>Don&rsquo;t get confused with the term connectionless. Of course, two systems communicating over a network are in some sense connected. Keep in mind that these terms are used with special meanings, which we will cover shortly, and should not imply that some protocols manage to send data without a connection</p></li><li><p>Protocols that are used Most</p><ul><li>Transmission Control Protocol(<strong>TCP</strong>) (connection-oriented)</li><li>User Datagram Protocol(<strong>UDP</strong>)(connectionless)</li></ul></li></ul><h4 id=connectionless-protocol>Connectionless Protocol</h4><ul><li>each data packet is addressed individually.</li><li>From the protocol&rsquo;s perspective, each data packet is completely independent and unrelated to any packets coming before or after it</li><li>like <strong>UDP</strong></li><li>UDP makes no guarantee that a packet will arrive. UDP doesn&rsquo;t generally provide a method to know if a packet did not arrive, and UDP does not guarantee that the packets will arrive in the same order they were sent</li></ul><h4 id=connetion-oriented-protocol>Connetion-Oriented Protocol</h4><ul><li>It requires a logical connection to be established between the two processes before data is exchanged. The connection must be maintained during the entire time that communication is taking place, then released afterwards.</li><li>The process is like telephone call, were virtual circuits is established, caller must know the person telephone number and phone must be answered before message can be delivered</li><li>example TCP,</li><li>TCP needs established connections.</li></ul><h1 id=finally-socket-functions>Finally&mldr;. Socket Functions</h1><ul><li>Common Socket Functions:<ul><li><code>socket()</code> creates and initialize a new socket.</li><li><code>bind()</code> assigns local IP address and port number to the socket</li><li><code>listen()</code> to listen for new connections [only for TCP]</li><li><code>connect()</code> attempt to make a connection on a socket specific to the address</li><li><code>accept()</code> create new socket for incoming TCP connection</li><li><code>send()</code> and <code>recv()</code> used to send and receive data with socket</li><li><code>sendto()</code> and <code>recvfrom()</code> used to send data from sockets without a bound remote address</li><li><code>close()</code> (Berkeley sockets) and <code>closesocket()</code> (Winsock sockets) are used to close a socket</li><li><code>shutdown()</code> used to close one side of TCP connection.</li><li><code>select()</code> used to wait for an event on one or more sockets</li><li><code>getnameinfo()</code> translates socket address to a node name an service location.</li><li><code>getaddrinfo()</code> allocates and initializes a linked list of addrinfo structures for each network address that matches node an service.</li><li><code>setsocketopt()</code> used to change some socket options</li></ul></li></ul><h1 id=socket-setup>Socket Setup</h1><p>Before we can use sockets we need to include the socket API header files. these files vary depending on whether we are using Berkeley sockets or Winsock.</p><p><strong>Note</strong>: Winsock requires initialization before use, It also requires that a cleanup function is called when we are finished.</p><p><strong>We are writing code that compatible with both Linux/mac and Windows</strong></p><p>By using preprocessor statement</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cp>#if defined(_WIN32)
</span></span></span></code></pre></div><p>we can include in our program that will only compiled on Windows.</p><h3 id=code-for-initializing-socket>Code for initializing socket</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cm>/* file: socket_initi.c */</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// When windows system detected
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=cp>#if defined(_WIN32)
</span></span></span><span class=line><span class=cl><span class=cp>#ifndef _WIN32_WINNT
</span></span></span><span class=line><span class=cl><span class=cp>#define _WN32_WINNT 0x0600
</span></span></span><span class=line><span class=cl><span class=cp># endif
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=c1>//must defined for winsock headers to provide all function we need
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=cp>#include</span><span class=cpf>&lt;winsock2.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span><span class=cpf>&lt;ws2tcpip.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=cm>/*pragma statement tells the Microsoft Visual C compiler to link your program with Winsock Library ws2_32.lib*/</span>
</span></span><span class=line><span class=cl><span class=cm>/* if you are using MinGW compiler then #pragma is ignored.*/</span>
</span></span><span class=line><span class=cl><span class=cm>/* in this case you need to link manually using command line using -lws2_32*/</span>
</span></span><span class=line><span class=cl><span class=cp>#pragma comment(lib, &#34;ws2_32.lib&#34;)
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=cp>#else
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=c1>// when Linux/MacOS detected
</span></span></span><span class=line><span class=cl><span class=c1>//section includes Berkeley socket API headers and other headers needed for this platform
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=cp>#include</span><span class=cpf>&lt;sys/types.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span><span class=cpf>&lt;sys/socket.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span><span class=cpf>&lt;netinet/in.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span><span class=cpf>&lt;arpa/inet.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span><span class=cpf>&lt;netdb.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span><span class=cpf>&lt;unistd.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span><span class=cpf>&lt;errno.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#endif
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=cp>#include</span><span class=cpf>&lt;stdio.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl><span class=cp>#if defined(_WIN32)
</span></span></span><span class=line><span class=cl><span class=cp></span>	<span class=n>WSADATA</span> <span class=n>d</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=c1>// WSAStartup() for Windows to initialize Winsock
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=c1>// MAKEWORD macro allow to request Winsock Version 2.2
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=k>if</span> <span class=p>(</span><span class=n>WSAStartup</span><span class=p>(</span><span class=n>MAKEWORD</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=mi>2</span><span class=p>),</span> <span class=o>&amp;</span><span class=n>d</span><span class=p>){</span>			
</span></span><span class=line><span class=cl>		<span class=c1>// If program unable to initialize Winsock
</span></span></span><span class=line><span class=cl><span class=c1></span>		<span class=n>fprintf</span><span class=p>(</span><span class=n>stderr</span><span class=p>,</span> <span class=s>&#34;Failed to initialize.</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl><span class=cp>#endif
</span></span></span><span class=line><span class=cl><span class=cp></span>	<span class=c1>// When all are done!
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=n>printf</span><span class=p>(</span><span class=s>&#34;Ready to use socket API.</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cp>#if defined(_WIN32)
</span></span></span><span class=line><span class=cl><span class=cp></span>	<span class=c1>// Allows windows to do additional cleanup
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=n>WSACleanup</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=cp>#endif
</span></span></span><span class=line><span class=cl><span class=cp></span>	<span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><ul><li>Command for compiling and running this program on Linux/Mac</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=line><span class=cl><span class=go>gcc socket_initi.c -o socket_initi
</span></span></span></code></pre></div><ul><li>Compiling on Windows using MinGW</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=line><span class=cl><span class=go>gcc socket_initi.c -o socket_initi.exe -lws2_32
</span></span></span><span class=line><span class=cl><span class=go>socket_initi.exe
</span></span></span></code></pre></div><p>Note : <code>-lws2_32</code> flag is needed to tell the compiler to link <code>ws2_32.lib</code></p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 0001-01-01</span></div><div class=post-info-license></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=javascript:void(0); title="Share on Twitter" data-sharer=twitter data-url=https://o5wald.github.io/posts/socket-prog-101/ data-title="Socket Programming 101 using C" data-via=aryankapse10><i class="fab fa-twitter fa-fw"></i></a><a href=javascript:void(0); title="Share on Facebook" data-sharer=facebook data-url=https://o5wald.github.io/posts/socket-prog-101/><i class="fab fa-facebook-square fa-fw"></i></a><a href=javascript:void(0); title="Share on WhatsApp" data-sharer=whatsapp data-url=https://o5wald.github.io/posts/socket-prog-101/ data-title="Socket Programming 101 using C" data-web><i class="fab fa-whatsapp fa-fw"></i></a><a href=javascript:void(0); title="Share on Line" data-sharer=line data-url=https://o5wald.github.io/posts/socket-prog-101/ data-title="Socket Programming 101 using C"><i data-svg-src=/lib/simple-icons/icons/line.min.svg></i></a><a href=javascript:void(0); title="Share on 微博" data-sharer=weibo data-url=https://o5wald.github.io/posts/socket-prog-101/ data-title="Socket Programming 101 using C"><i class="fab fa-weibo fa-fw"></i></a><a href=javascript:void(0); title="Share on Myspace" data-sharer=myspace data-url=https://o5wald.github.io/posts/socket-prog-101/ data-title="Socket Programming 101 using C" data-description><i data-svg-src=/lib/simple-icons/icons/myspace.min.svg></i></a><a href=javascript:void(0); title="Share on Blogger" data-sharer=blogger data-url=https://o5wald.github.io/posts/socket-prog-101/ data-title="Socket Programming 101 using C" data-description><i class="fab fa-blogger fa-fw"></i></a><a href=javascript:void(0); title="Share on Evernote" data-sharer=evernote data-url=https://o5wald.github.io/posts/socket-prog-101/ data-title="Socket Programming 101 using C"><i class="fab fa-evernote fa-fw"></i></a></span></div></div></div><div class=post-info-more><section class=post-tags></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav><a href=/posts/keylogger/ class=next rel=next title="Simple Keylogger for Windows">Simple Keylogger for Windows<i class="fas fa-angle-right fa-fw"></i></a></div></div><div id=comments></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.94.1">Hugo</a> | Theme - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a></div><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2019 - 2022</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank></a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw"></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw"></i></a></div><link rel=stylesheet href=/lib/katex/katex.min.css><link rel=stylesheet href=/lib/katex/copy-tex.min.css><link rel=stylesheet href=/lib/cookieconsent/cookieconsent.min.css><script type=text/javascript src=/lib/smooth-scroll/smooth-scroll.min.js></script><script type=text/javascript src=/lib/autocomplete/autocomplete.min.js></script><script type=text/javascript src=/lib/lunr/lunr.min.js></script><script type=text/javascript src=/lib/lazysizes/lazysizes.min.js></script><script type=text/javascript src=/lib/clipboard/clipboard.min.js></script><script type=text/javascript src=/lib/sharer/sharer.min.js></script><script type=text/javascript src=/lib/katex/katex.min.js></script><script type=text/javascript src=/lib/katex/auto-render.min.js></script><script type=text/javascript src=/lib/katex/copy-tex.min.js></script><script type=text/javascript src=/lib/katex/mhchem.min.js></script><script type=text/javascript src=/lib/cookieconsent/cookieconsent.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:10},comment:{},cookieconsent:{content:{dismiss:"Got it!",link:"Learn more",message:"This website uses Cookies to improve your experience."},enable:!0,palette:{button:{background:"#f0f0f0"},popup:{background:"#1aa3ff"}},theme:"edgeless"},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{highlightTag:"em",maxResultLength:10,noResultsFound:"No results found",snippetLength:30}}</script><script type=text/javascript src=/js/theme.min.js></script></body></html>